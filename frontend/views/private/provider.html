<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Proveedor - Express Services</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../../css/styles.css">
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top shadow-sm">
        <div class="container">
            <span class="navbar-brand fw-bold text-primary" style="cursor: pointer;" onclick="scrollToTop()">
                <i class="bi bi-lightning-charge-fill"></i> Express Services
            </span>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div id="guest-buttons" class="d-flex ms-auto">
                    <button class="btn btn-outline-primary me-2" data-bs-toggle="modal" data-bs-target="#loginModal">Ingresar</button>
                    <button class="btn btn-primary btn-glow" data-bs-toggle="modal" data-bs-target="#registerModal">Registrarse</button>
                </div>
                <div id="user-buttons" class="d-none d-flex align-items-center ms-auto">
                    <button id="contract-history-btn" class="btn btn-outline-info me-2" title="Historial de Contratos">
                        <i class="bi bi-clock-history"></i> Historial
                    </button>
                    <a href="#" class="btn btn-outline-primary me-3 d-none" id="switch-mode-btn"></a>
                    <div class="dropdown">
                        <button class="btn btn-primary btn-sm dropdown-toggle" type="button" id="profile-dropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-person-circle me-1"></i> Mi Perfil
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profile-dropdown">
                            <li><a class="dropdown-item" href="#" id="edit-profile-btn"><i class="bi bi-pencil-square me-2"></i>Editar Perfil</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="#" id="logout-btn"><i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="container" style="padding-top: 100px;">
        <!-- Primera fila: Mis Mensajes y Mis Servicios -->
        <div class="row mb-5">
            <div class="col-lg-4">
                <h2 class="fw-bold mb-3">Mis Mensajes</h2>
                <div id="conversations-container" class="list-group">
                </div>
            </div>
            <div class="col-lg-8">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h2 class="fw-bold">Mis Servicios</h2>
                    <button class="btn btn-primary btn-glow" data-bs-toggle="modal" data-bs-target="#serviceFormModal" id="btn-open-create-modal">
                        <i class="bi bi-plus-circle-fill me-2"></i>Publicar Servicio
                    </button>
                </div>
                <div id="my-services-container" class="row">
                </div>
            </div>
        </div>

        <!-- Segunda fila: Solicitudes de Contrato (ancho completo) -->
        <section class="row">
            <div class="col-12">
                <h2 class="fw-bold border-bottom pb-2 mb-3">Solicitudes de Contrato</h2>
                <div id="contracts-container">
                </div>
            </div>
        </section>
    </main>

    <div class="modal fade" id="serviceFormModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title fw-bold" id="service-modal-title">Publicar Servicio</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <form id="serviceForm">
                <input type="hidden" name="id_service"> <div class="mb-3"><label class="form-label">Título del Servicio</label><input type="text" class="form-control" name="name" required></div>
                <div class="mb-3"><label class="form-label">Descripción</label><textarea class="form-control" name="description" rows="3" required></textarea></div>
                <div class="row">
                    <div class="col-6 mb-3"><label class="form-label">Precio/hora</label><input type="number" class="form-control" name="hour_price" min="0" required></div>
                    <div class="col-6 mb-3"><label class="form-label">Años Exp.</label><input type="number" class="form-control" name="experience_years" min="0" required></div>
                </div>
                <div class="mb-3"><label class="form-label">Categoría</label><select class="form-select" name="id_category" id="categorySelect" required><option value="" disabled selected>Cargando...</option></select></div>
                <button type="submit" class="btn btn-primary w-100">Guardar Servicio</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    
    <footer class="footer-section bg-dark text-white pt-5 pb-4">
        <div class="container">
            <div class="row">

                <div class="col-lg-4 col-md-6 mb-4">
                    <h5 class="text-uppercase fw-bold mb-4" style="cursor: pointer;" onclick="scrollToTop()">
                        <i class="bi bi-lightning-charge-fill"></i> Express Services
                    </h5>
                    <p class="text-white-50">
                        Nuestra misión es conectar el talento de profesionales locales con las necesidades de los clientes, de una forma rápida, segura y eficiente.
                    </p>
                </div>

                <div class="col-lg-4 col-md-6 mb-4">
                    <h5 class="text-uppercase fw-bold mb-4">Términos y Condiciones</h5>
                    <p class="text-white-50 small">Conoce las reglas de uso del sitio, responsabilidades y tus derechos como usuario.</p>
                    <button class="btn btn-outline-light btn-sm" data-bs-toggle="modal" data-bs-target="#termsModal">
                        Leer Términos y Condiciones <i class="bi bi-file-earmark-text"></i>
                    </button>
                </div>

                <div class="col-lg-4 col-md-6 mb-4">
                    <h5 class="text-uppercase fw-bold mb-4">Síguenos</h5>
                    <a href="#" class="text-white me-3 fs-4 footer-icon"><i class="bi bi-facebook"></i></a>
                    <a href="#" class="text-white me-3 fs-4 footer-icon"><i class="bi bi-instagram"></i></a>
                    <a href="#" class="text-white fs-4 footer-icon"><i class="bi bi-linkedin"></i></a>
                </div>

            </div>
            <hr class="my-4">
            <div class="text-center text-white-50">
                <p>&copy; 2025 Express Services. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Modal: Términos y Condiciones -->
    <div class="modal fade" id="termsModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content text-dark">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold">Términos y Condiciones de Express Services</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" style="max-height: 65vh; overflow-y: auto;">
                    <p class="text-muted small mb-2">Última actualización: 29 de agosto de 2025</p>
                    <p>Bienvenido a Express Services. Al utilizar nuestra plataforma, usted acepta los siguientes términos y condiciones que regulan la relación entre clientes y proveedores de servicios dentro de Express Services.</p>

                    <h6 class="fw-bold mt-3">1. Objeto de la Plataforma</h6>
                    <p>Express Services es una plataforma digital que conecta a clientes que requieren servicios con proveedores que los ofrecen. La plataforma facilita la comunicación, contratación y pago de dichos servicios.</p>

                    <h6 class="fw-bold mt-3">2. Garantías para el Cliente</h6>
                    <p>Express Services ofrece una garantía de satisfacción al cliente. Si el servicio recibido es de mala calidad o no fue cumplido según lo acordado, el cliente podrá solicitar un reembolso parcial o total del pago realizado. Para aplicar esta garantía, el cliente deberá presentar la reclamación dentro de los [X] días posteriores a la finalización del servicio, aportando la evidencia correspondiente. Express Services evaluará cada caso y determinará si corresponde un reembolso.</p>

                    <h6 class="fw-bold mt-3">3. Garantías para el Proveedor</h6>
                    <p>Express Services garantiza al proveedor el pago por los servicios prestados, siempre que el servicio haya sido cumplido de forma satisfactoria. Una vez confirmado el cumplimiento del servicio, el pago será liberado al proveedor en los plazos establecidos por la plataforma. En caso de disputa con el cliente, Express Services retendrá el pago hasta que la situación sea resuelta.</p>

                    <h6 class="fw-bold mt-3">4. Pagos y Reembolsos</h6>
                    <p>Todos los pagos se realizan de forma segura a través de la plataforma Express Services. Los reembolsos al cliente se procesarán únicamente a través de los mismos medios de pago utilizados en la transacción original. Express Services se reserva el derecho de retener temporalmente los fondos en caso de investigaciones por disputas.</p>

                    <h6 class="fw-bold mt-3">5. Responsabilidades</h6>
                    <p>El proveedor es responsable de cumplir con el servicio ofrecido en los términos acordados. El cliente es responsable de realizar el pago correspondiente y de proporcionar información veraz y suficiente para la correcta prestación del servicio. Express Services actúa únicamente como intermediario tecnológico, no como empleador, socio o representante de los proveedores.</p>

                    <h6 class="fw-bold mt-3">6. Modificaciones</h6>
                    <p>Express Services podrá actualizar estos Términos y Condiciones en cualquier momento. Los cambios serán notificados en la plataforma y entrarán en vigor desde su publicación.</p>

                    <h6 class="fw-bold mt-3">7. Aceptación</h6>
                    <p>Al usar Express Services, el usuario declara haber leído, comprendido y aceptado los presentes Términos y Condiciones.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal PQRS -->
    <div class="modal fade" id="pqrsModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold">Formulario de Soporte (PQRS)</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p class="text-muted small">Usa este formulario para enviarnos tus peticiones, quejas, reclamos o sugerencias.</p>
                    <form id="pqrsForm">
                        <div class="mb-3">
                            <label for="pqrs-email" class="form-label">Tu correo electrónico</label>
                            <input type="email" class="form-control" id="pqrs-email" name="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="pqrs-type" class="form-label">Tipo de solicitud</label>
                            <select class="form-select" id="pqrs-type" name="type" required>
                                <option value="" disabled selected>Selecciona una opción...</option>
                                <option value="peticion">Petición</option>
                                <option value="queja">Queja</option>
                                <option value="reclamo">Reclamo</option>
                                <option value="sugerencia">Sugerencia</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="pqrs-message" class="form-label">Mensaje</label>
                            <textarea class="form-control" id="pqrs-message" name="message" rows="4" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 btn-glow">Enviar Solicitud</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Botón de scroll hacia arriba -->
        </footer>
    
    <!-- Modal de Historial de Contratos -->
    <div class="modal fade" id="contractHistoryModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold">
                        <i class="bi bi-clock-history"></i> Historial de Contratos Completados
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div id="contract-history-container">
                        <div class="text-center text-muted">
                            <i class="bi bi-inbox" style="font-size: 3rem;"></i>
                            <p class="mt-3">No tienes contratos completados en tu historial.</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Botón de scroll hacia arriba -->
    <button id="scroll-to-top" class="btn btn-primary position-fixed d-flex align-items-center justify-content-center" style="bottom: 20px; right: 20px; border-radius: 50%; width: 55px; height: 55px; z-index: 1000; box-shadow: 0 4px 12px rgba(0,123,255,0.4); transition: all 0.3s ease; opacity: 1; visibility: visible;">
        <i class="bi bi-arrow-up" style="font-size: 1.4rem; font-weight: bold;"></i>
    </button>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Función para hacer scroll hacia arriba de la página
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
    </script>
    <script src="../../js/app.js" type="module"></script>
    <script src="../../js/provider.js" type="module"></script>
</body>
</html>